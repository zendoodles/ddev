<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Do local website development on your computer or in the cloud with DDEV."><meta name=author content="Localdev Foundation"><link href=https://ddev.readthedocs.io/en/latest/users/install/performance/ rel=canonical><link rel=icon href=../../../favicon.png><meta name=generator content="mkdocs-1.3.0, mkdocs-material-8.3.9"><title>Performance and Mutagen - DDEV Docs</title><link rel=stylesheet href=../../../assets/stylesheets/main.1d29e8d0.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.cbb835fc.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../assets/extra.css><script>__md_scope=new URL("../../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=light-blue data-md-color-accent=indigo> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#performance-and-mutagen class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title="DDEV Docs" class="md-header__button md-logo" aria-label="DDEV Docs" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> DDEV Docs </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Performance and Mutagen </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=light-blue data-md-color-accent=indigo aria-hidden=true type=radio name=__palette id=__palette_1> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/drud/ddev title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> drud/ddev </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../.. class="md-tabs__link md-tabs__link--active"> Start! </a> </li> <li class=md-tabs__item> <a href=../../basics/ class=md-tabs__link> Basics </a> </li> <li class=md-tabs__item> <a href=../../extend/database_types/ class=md-tabs__link> Configuration </a> </li> <li class=md-tabs__item> <a href=../../extend/customization-extendibility/ class=md-tabs__link> Extending </a> </li> <li class=md-tabs__item> <a href=../../debugging-profiling/step-debugging/ class=md-tabs__link> Debugging & Profiling </a> </li> <li class=md-tabs__item> <a href=../../providers/ class=md-tabs__link> Hosting integration </a> </li> <li class=md-tabs__item> <a href=../../topics/phpstorm/ class=md-tabs__link> Guides </a> </li> <li class=md-tabs__item> <a href=../../details/offline-usage/ class=md-tabs__link> Details </a> </li> <li class=md-tabs__item> <a href=../../../developers/ class=md-tabs__link> Developers </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title="DDEV Docs" class="md-nav__button md-logo" aria-label="DDEV Docs" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> DDEV Docs </label> <div class=md-nav__source> <a href=https://github.com/drud/ddev title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> drud/ddev </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_1 type=checkbox id=__nav_1 checked> <div class="md-nav__link md-nav__link--index "> <a href=../../..>Start!</a> <label for=__nav_1> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=Start! data-md-level=1> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> Start! </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_1_2 type=checkbox id=__nav_1_2 checked> <div class="md-nav__link md-nav__link--index "> <a href=../ >Installing</a> <label for=__nav_1_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=Installing data-md-level=2> <label class=md-nav__title for=__nav_1_2> <span class="md-nav__icon md-icon"></span> Installing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../docker-installation/ class=md-nav__link> Docker Installation </a> </li> <li class=md-nav__item> <a href=../ddev-installation/ class=md-nav__link> DDEV Installation </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Performance and Mutagen <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Performance and Mutagen </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#mutagen class=md-nav__link> Mutagen </a> <nav class=md-nav aria-label=Mutagen> <ul class=md-nav__list> <li class=md-nav__item> <a href=#enabling-mutagen class=md-nav__link> Enabling Mutagen </a> </li> <li class=md-nav__item> <a href=#caveats-about-mutagen-integration class=md-nav__link> Caveats about Mutagen Integration </a> </li> <li class=md-nav__item> <a href=#syncing-after-git-checkout class=md-nav__link> Syncing after git checkout </a> </li> <li class=md-nav__item> <a href=#syncing-after-yarn-npm-pnpm-actions class=md-nav__link> Syncing after yarn, npm, pnpm actions </a> </li> <li class=md-nav__item> <a href=#advanced-mutagen-configuration-options class=md-nav__link> Advanced Mutagen configuration options </a> </li> <li class=md-nav__item> <a href=#troubleshooting-mutagen-sync-issues class=md-nav__link> Troubleshooting Mutagen Sync Issues </a> <nav class=md-nav aria-label="Troubleshooting Mutagen Sync Issues"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#advanced-mutagen-troubleshooting class=md-nav__link> Advanced Mutagen Troubleshooting </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#mutagen-strategies-and-design-considerations class=md-nav__link> Mutagen Strategies and Design Considerations </a> </li> <li class=md-nav__item> <a href=#interaction-with-other-usages-of-mutagen class=md-nav__link> Interaction with other usages of Mutagen </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#using-nfs-to-mount-the-project-into-the-web-container class=md-nav__link> Using NFS to Mount the Project into the Web Container </a> <nav class=md-nav aria-label="Using NFS to Mount the Project into the Web Container"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#macos-full-disk-access-for-special-directories class=md-nav__link> macOS Full Disk Access for Special Directories </a> </li> <li class=md-nav__item> <a href=#macos-specific-nfs-debugging class=md-nav__link> macOS-specific NFS debugging </a> </li> <li class=md-nav__item> <a href=#debugging-ddev-start-failures-with-nfs_mount_enabled-true class=md-nav__link> Debugging ddev start failures with nfs_mount_enabled: true </a> </li> <li class=md-nav__item> <a href=#windows-specific-nfs-debugging class=md-nav__link> Windows-specific NFS debugging </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#freeing-up-system-resources class=md-nav__link> Freeing Up System Resources </a> </li> <li class=md-nav__item> <a href=#docker-desktop-for-mac-settings class=md-nav__link> Docker Desktop for Mac Settings </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../shell-completion/ class=md-nav__link> Shell Completion & Autocomplete </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../quickstart/ class=md-nav__link> Quickstart for many CMSs </a> </li> <li class=md-nav__item> <a href=../../support/ class=md-nav__link> Support </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_2 type=checkbox id=__nav_2 checked> <div class="md-nav__link md-nav__link--index "> <a href=../../basics/ >Basics</a> <label for=__nav_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=Basics data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Basics </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../basics/how-ddev-works/ class=md-nav__link> How DDEV Works </a> </li> <li class=md-nav__item> <a href=../../basics/cli-usage/ class=md-nav__link> Using the `ddev` command </a> </li> <li class=md-nav__item> <a href=../../basics/database_management/ class=md-nav__link> Database Management </a> </li> <li class=md-nav__item> <a href=../../basics/troubleshooting/ class=md-nav__link> Troubleshooting </a> </li> <li class=md-nav__item> <a href=../../basics/faq/ class=md-nav__link> Frequently-Asked Questions (FAQ) </a> </li> <li class=md-nav__item> <a href=../../basics/developer-tools/ class=md-nav__link> Built-in Developer Tools </a> </li> <li class=md-nav__item> <a href=../../basics/uninstall/ class=md-nav__link> Uninstalling DDEV </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_3 type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3> Configuration <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Configuration data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Configuration </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../extend/database_types/ class=md-nav__link> Database Server Types </a> </li> <li class=md-nav__item> <a href=../../configuration/hooks/ class=md-nav__link> Hooks </a> </li> <li class=md-nav__item> <a href=../../extend/additional-hostnames/ class=md-nav__link> Additional Project Hostnames </a> </li> <li class=md-nav__item> <a href=../../configuration/config_yaml/ class=md-nav__link> .ddev/config.yaml options </a> </li> <li class=md-nav__item> <a href=../../configuration/experimental/ class=md-nav__link> Experimental Docker Configurations </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_4 type=checkbox id=__nav_4 checked> <label class=md-nav__link for=__nav_4> Extending <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Extending data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Extending </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../extend/customization-extendibility/ class=md-nav__link> Extending and Customizing Environments </a> </li> <li class=md-nav__item> <a href=../../extend/additional-services/ class=md-nav__link> Additional Service Configurations and Add-ons for ddev </a> </li> <li class=md-nav__item> <a href=../../extend/custom-compose-files/ class=md-nav__link> Defining an additional service with `docker-compose.*.yaml` </a> </li> <li class=md-nav__item> <a href=../../extend/customizing-images/ class=md-nav__link> Customizing Docker Images </a> </li> <li class=md-nav__item> <a href=../../extend/custom-commands/ class=md-nav__link> Custom (Shell) Commands </a> </li> <li class=md-nav__item> <a href=../../extend/in-container-configuration/ class=md-nav__link> In-Container home directory and shell configuration </a> </li> <li class=md-nav__item> <a href=../../extend/custom-tls-certificates/ class=md-nav__link> Custom TLS Certificates </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_5 type=checkbox id=__nav_5 checked> <label class=md-nav__link for=__nav_5> Debugging & Profiling <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Debugging & Profiling" data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Debugging & Profiling </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../debugging-profiling/step-debugging/ class=md-nav__link> Step-debugging with Xdebug </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_5_2 type=checkbox id=__nav_5_2 checked> <label class=md-nav__link for=__nav_5_2> Profiling <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Profiling data-md-level=2> <label class=md-nav__title for=__nav_5_2> <span class="md-nav__icon md-icon"></span> Profiling </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../debugging-profiling/blackfire-profiling/ class=md-nav__link> Blackfire.io Profiling </a> </li> <li class=md-nav__item> <a href=../../debugging-profiling/xhprof-profiling/ class=md-nav__link> xhprof Profiling </a> </li> <li class=md-nav__item> <a href=../../debugging-profiling/xdebug-profiling/ class=md-nav__link> Xdebug Profiling </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_6 type=checkbox id=__nav_6 checked> <div class="md-nav__link md-nav__link--index "> <a href=../../providers/ >Hosting integration</a> <label for=__nav_6> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="Hosting integration" data-md-level=1> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Hosting integration </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../providers/acquia/ class=md-nav__link> Acquia Integration </a> </li> <li class=md-nav__item> <a href=../../providers/pantheon/ class=md-nav__link> Pantheon Integration </a> </li> <li class=md-nav__item> <a href=../../providers/platform/ class=md-nav__link> Platform.sh Integration </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_7 type=checkbox id=__nav_7 checked> <label class=md-nav__link for=__nav_7> Guides <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Guides data-md-level=1> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Guides </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../topics/phpstorm/ class=md-nav__link> PhpStorm Configuration and Integration </a> </li> <li class=md-nav__item> <a href=../../topics/sharing/ class=md-nav__link> Sharing your project with others </a> </li> <li class=md-nav__item> <a href=../../topics/webserver/ class=md-nav__link> Webserver-Specific Help and Techniques </a> </li> <li class=md-nav__item> <a href=../../topics/whats_in_ddev_dir/ class=md-nav__link> What's all that stuff in the `.ddev` directory? </a> </li> <li class=md-nav__item> <a href=../../topics/cms_specific_help/ class=md-nav__link> Controlling CMS Settings Files in DDEV </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_8 type=checkbox id=__nav_8 checked> <label class=md-nav__link for=__nav_8> Details <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Details data-md-level=1> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> Details </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../details/offline-usage/ class=md-nav__link> Using DDEV offline </a> </li> <li class=md-nav__item> <a href=../../details/opting-in/ class=md-nav__link> Opting in </a> </li> <li class=md-nav__item> <a href=../../details/alternate-uses/ class=md-nav__link> Alternate Uses for DDEV </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_9 type=checkbox id=__nav_9 checked> <div class="md-nav__link md-nav__link--index "> <a href=../../../developers/ >Developers</a> <label for=__nav_9> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=Developers data-md-level=1> <label class=md-nav__title for=__nav_9> <span class="md-nav__icon md-icon"></span> Developers </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../developers/building-contributing/ class=md-nav__link> Building, Testing, and Contributing </a> </li> <li class=md-nav__item> <a href=../../../developers/buildkite-testmachine-setup/ class=md-nav__link> Buildkite Test Agent Setup </a> </li> <li class=md-nav__item> <a href=../../../developers/github-selfhosted-setup/ class=md-nav__link> Github Self-Hosted Agent Setup </a> </li> <li class=md-nav__item> <a href=../../../developers/project-types/ class=md-nav__link> Adding New Project Types </a> </li> <li class=md-nav__item> <a href=../../../developers/release-management/ class=md-nav__link> DDEV Release Management and Docker Images </a> </li> <li class=md-nav__item> <a href=../../../developers/styleguide/ class=md-nav__link> Styleguide </a> </li> <li class=md-nav__item> <a href=../../../developers/testing-docs/ class=md-nav__link> Working on the docs </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/drud/ddev/blob/master/docs/content/users/install/performance.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg> </a> <h1 id=performance-and-mutagen>Performance and Mutagen<a class=headerlink href=#performance-and-mutagen title="Permanent link">&para;</a></h1> <p>Every developer wants both fast startup of the environment and quick response to web page requests. DDEV is always focused on improving performance. However, both Docker Desktop on macOS and Windows has significant performance problems with mounted filesystems (like the mounted project where code can be edited either inside the container or on the host).</p> <p>Folks are usually happy with webserving performance right away on Linux, which includes Windows WSL2 and Gitpod.io, so there's not usually anything to do.</p> <p>On macOS and traditional Windows, the Docker environment has performance problems getting files synced between the host and the container, and that causes slowdowns in webserving.</p> <p>Currently, most people are using Mutagen on macOS. It's fast, requires no installation or configuration (besides turning it on with <code>ddev config --mutagen-enabled</code>), and although there are caveats below it has worked really, really well.</p> <p>In the past, lots of folks configured NFS on macOS and Windows to speed things up, and it helped, but nowhere near as much as Mutagen, and there is some manual system configuration required.</p> <p>Instructions for Mutagen and NFS are below.</p> <div class="tabbed-set tabbed-alternate" data-tabs=1:2><input checked=checked id=__tabbed_1_1 name=__tabbed_1 type=radio><input id=__tabbed_1_2 name=__tabbed_1 type=radio><div class=tabbed-labels><label for=__tabbed_1_1>Mutagen</label><label for=__tabbed_1_2>NFS</label></div> <div class=tabbed-content> <div class=tabbed-block> <h2 id=mutagen>Mutagen<a class=headerlink href=#mutagen title="Permanent link">&para;</a></h2> <p><strong>TL;DR:</strong> If you're on macOS or Windows just enable mutagen. <code>ddev config global --mutagen-enabled</code>. You'll be glad you did.</p> <p>The Mutagen asynchronous caching feature offers advanced performance experiences and is recommended for most projects. It's now the preferred way to get great webserving performance on macOS and Windows. Unlike the NFS feature, it requires no pre-configuration or installation. <strong>You do not need to (and should not) install mutagen.</strong> It can also be significantly faster than NFS and massively faster than plain vanilla Docker or Colima. In addition, it makes filesystem watchers (fsnotify/inotify) work correctly.</p> <p>Mutagen can offer massive webserver performance speedups on macOS and traditional Windows; it works fine (and has automated tests) on Linux or Windows WSL2, but the speedup you see may not be worth turning it on, since Linux/WSL2 are already so fast.</p> <p>Docker bind-mounts (the traditional approach to getting your code into the DDEV web container) can be slow on macOS and Windows, even with NFS. The reason is that every file access has to be checked against the file on the host, and Docker's setup to do this on macOS and Windows offers is not very performant. (On Linux and Linux-like systems, Docker provides native file-access performance.)</p> <p>Mutagen works by decoupling reads and writes inside the container from reads and writes on the host. If something changes on the host, it gets changed "pretty soon" in the container, and if something changes inside the container it gets updated "pretty soon" on the host. This means that the webserver inside the web container does not have to wait for slow file reads or writes, and gets near-native file speeds. However, it also means that at any given moment, the files on the host may not exactly match the files inside the container, and if files are changed both places, conflicts may result.</p> <p>Another major advantage of Mutagen over NFS is that it supports filesystem notifications, so file-watchers on both the host and inside the container will be notified when changes occur. This is a great advantage for many development tools, which had to poll for changes in the past, but now will be notified via normal inotify/fsnotify techniques.</p> <p>If you trouble with the Mutagen feature, please try to recreate it and report via one of the <a href=../../support/ >support channels</a>.</p> <h3 id=enabling-mutagen>Enabling Mutagen<a class=headerlink href=#enabling-mutagen title="Permanent link">&para;</a></h3> <div class="admonition warning"> <p class=admonition-title>Do not separately install mutagen</p> <p>Do not separately install the mutagen binary. It's better if you don't have it installed. DDEV does the installation and upgrades when needed.</p> </div> <p>To begin using Mutagen, just <code>ddev stop</code> and then <code>ddev config --mutagen-enabled</code> and start the project again. If the mutagen binary needs to be downloaded, it will be downloaded automatically.</p> <p>To stop using Mutagen on a project, <code>ddev mutagen reset &amp;&amp; ddev config --mutagen-enabled=false</code>.</p> <p>You can also enable mutagen globally (recommended) with <code>ddev config global --mutagen-enabled</code></p> <p>Note that the nfs-mount-enabled feature is automatically turned off if you're using mutagen.</p> <p>You can run mutagen on all your projects, there's no limit. To configure it globally, <code>ddev config global --mutagen-enabled</code>, but you cannot disable mutagen on individual projects if it's enabled globally (the global configuration wins).</p> <h3 id=caveats-about-mutagen-integration>Caveats about Mutagen Integration<a class=headerlink href=#caveats-about-mutagen-integration title="Permanent link">&para;</a></h3> <p>Most people have an excellent experience with Mutagen, but it's good to understand how it works and what the trade-offs are:</p> <ul> <li><strong>Not for every project</strong>: Mutagen is not the right choice for every project. If filesystem consistency is your highest priority (as opposed to performance) then there are reasons to be cautious, although people have had excellent experiences: there haven't been major issues reported, but two-way sync is a very difficult computational problem, and problems may surface.</li> <li><strong>Only one mutagen version on machine please</strong>: DDEV installs its own mutagen. <strong>You do not need to install mutagen.</strong> Multiple mutagen versions can't coexist on one machine, so please stop any running mutagen. On macOS, <code>killall mutagen</code>. If you absolutely have to have mutagen installed via homebrew or another technique (for another project) make sure it's the same version as you get with <code>ddev version</code>.</li> <li><strong>Works everywhere, best on macOS and Windows</strong>: This is mostly for macOS and traditional Windows users. WSL2 is already the preferred environment for Windows users, but if you're still using traditional Windows this makes a huge difference. Although DDEV with mutagen is fully supported and tested on traditional Windows and Linux/WSL2, enabling mutagen on Linux/WSL2 may not be your first choice, since it adds some complexity and very little performance.</li> <li><strong>Increased disk usage</strong>: Mutagen integration increases the size of your project code disk usage, because the code exists both on your computer and also inside a docker volume. (As of v1.19+, this does <em>not</em> include your file upload directory, so normally it's not too intrusive.) So take care that you have enough overall disk space, and also (on macOS) that you have enough file space set up in Docker Desktop. For projects before v1.19, if you have a large amount of data like user-generated content that does not need syncing (i.e. <code>fileadmin</code> for TYPO3 or <code>sites/default/files</code> for Drupal), you can exclude specific directories from getting synced and use regular docker mount for them instead. See <a href=#advanced-mutagen-configuration-options>below for Advanced Mutagen configuration options</a>. As of v1.19, this is handled automatically and these files are not mutagen-synced.</li> <li>If your project is likely to change the same file on both the host and inside the container, you may be at risk for conflicts.</li> <li><strong>Massive changes</strong> to either the host or the container are the most likely to introduce issues. This integration has been tested extensively with major changes introduced by <code>ddev composer</code> and <code>ddev composer create</code> but be aware of this issue. Changing git branches, <code>npm install</code>, <code>yarn install</code>, or a script that deletes huge sections of the synced data are related behaviors that should raise caution. If you <code>ddev stop</code> and then change a git branch and then <code>ddev start</code> you are almost certain to get misbehavior, because mutagen didn't know you made those changes while it wasn't running, so tries to merge the results. If you have to do this, do a <code>ddev mutagen reset</code> before restarting the project, so that only the host side will have contents.</li> <li><strong>Mutagen is asynchronous</strong>: If you make a massive change on either the host or inside the container, you may not see the results for a little while. In studying situations like this, use <code>ddev mutagen monitor</code> to watch what's going on on your computer.</li> <li><strong><code>ddev mutagen sync</code></strong>: You can cause an explicit sync with <code>ddev mutagen sync</code> and see syncing status with <code>ddev mutagen status</code>. Note that both <code>ddev start</code> and <code>ddev stop</code> automatically force a mutagen sync.</li> <li><strong>Composer</strong>: If you do composer actions inside the container (with <code>ddev ssh</code>) you'll probably want to do a <code>ddev mutagen sync</code> to make sure they get synced as soon as possible, although most people won't ever notice the difference and mutagen will get it synced soon enough.</li> <li><strong>Big git operations</strong> (like switching branches) are best done on the host side, rather than inside the container, and you may want to do an explicit <code>ddev mutagen sync</code> command after doing something like that. Do them with the project running, rather than when it is stopped.</li> <li><strong>Project with users who don't want mutagen</strong>: If you share a project with some users (perhaps on macOS) that want mutagen and other users (perhaps on WSL2) that don't want or need it, then don't check in the <code>mutagen_enabled: true</code> in the <code>.ddev/config.yaml</code>. Instead, you can either use global mutagen configuration or add a not-checked-in project-level <code>.ddev/config.mutagen.yaml</code> that just has <code>mutagen_enabled: true</code> in it. Then only users that have that will have mutagen enabled.</li> <li><strong>Mutagen restrictions on Windows symlinks</strong>: On macOS and Linux (including WSL2) the default <code>.ddev/mutagen/mutagen.yml</code> chooses the <code>posix-raw</code> type of symlink handling (See <a href=https://mutagen.io/documentation/synchronization/symbolic-links>mutagen docs</a>). This basically means that any symlink created will try to sync, regardless of whether it's valid in the other environment. However, Mutagen does not support posix-raw on traditional Windows, so ddev uses the <code>portable</code> symlink mode. So on Windows with Mutagen symlinks have to be strictly limited to relative links that are inside the mutagen section of the project.</li> <li><strong>Backups!!!</strong>: Keep backups.</li> </ul> <h3 id=syncing-after-git-checkout>Syncing after <code>git checkout</code><a class=headerlink href=#syncing-after-git-checkout title="Permanent link">&para;</a></h3> <p>In general, it's best practice on most projects to do significant git operations on the host, but they can be disruptive to the sync. It's easy to add a git post-checkout hook to do a <code>ddev mutagen sync</code> operation though. Add the file <code>.git/hooks/post-checkout</code> to your project and set it to be executable (<code>chmod +x .git/hooks/post-checkout</code>):</p> <div class=highlight><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=ch>#!/bin/bash</span>
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>ddev mutagen sync <span class=o>||</span> <span class=nb>true</span>
</code></pre></div> <h3 id=syncing-after-yarn-npm-pnpm-actions>Syncing after yarn, npm, pnpm actions<a class=headerlink href=#syncing-after-yarn-npm-pnpm-actions title="Permanent link">&para;</a></h3> <p>Actions by those programs can also set off massive filesystem changes.</p> <p>You should run <code>ddev mutagen sync</code> in order to get things into sync, or simply wait.</p> <p><a name=mutagen-config></a></p> <h3 id=advanced-mutagen-configuration-options>Advanced Mutagen configuration options<a class=headerlink href=#advanced-mutagen-configuration-options title="Permanent link">&para;</a></h3> <p>The Mutagen project provides extensive configuration options that are <a href=https://mutagen.io/documentation/introduction/configuration>documented on the mutagen.io site</a>.</p> <p>Each project by default already has a <code>.ddev/mutagen/mutagen.yml</code> file with basic defaults which you can override if you remove the <code>#ddev-generated</code> line at the beginning of the file.</p> <p>Remember if you edit the <code>.ddev/mutagen/mutagen.yml</code> file:</p> <ul> <li>Remove the <code>#ddev-generated</code> line</li> <li>Execute a <code>ddev mutagen reset</code> to avoid the situation where the docker volume still has files from an older configuration.</li> </ul> <p>The most likely thing you'll want to do is to exclude a path from mutagen syncing, which you can do in the <code>paths:</code> section of the <code>ignore:</code> stanza in the <code>.ddev/mutagen/mutagen.yml</code>.</p> <p>It is possible to exclude mutagen syncing from a path and then bind-mount something from the host or a different volume on that path with a <code>docker-compose.*.yaml</code> file. So if you have an extremely heavyweight subdirectory in your project (lots of fonts or user-generated content for example), you could exclude that subdirectory in the .ddev/mutagen/mutagen.yml and then add a docker-compose.exclude.yaml.</p> <p>For example, if you want the <code>stored-binaries</code> subdirectory of the project to be available inside the container, but do not need mutagen to be syncing it, you can use normal docker bind-mounting for that subdirectory with this procedure:</p> <ol> <li>Take over the <code>.ddev/mutagen/mutagen.yml</code> by removing the <code>#ddev-generated</code> line</li> <li>Add <code>/stored-binaries</code> to the excluded paths:</li> </ol> <div class=highlight><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=w>    </span><span class=nt>ignore</span><span class=p>:</span><span class=w></span>
<a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a><span class=w>      </span><span class=nt>paths</span><span class=p>:</span><span class=w></span>
<a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=s>&quot;/stored-binaries&quot;</span><span class=w></span>
</code></pre></div> <ol> <li>Add a <code>.ddev/docker-compose.bindmount.yaml</code> something like this:</li> </ol> <div class=highlight><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=s>&quot;3.6&quot;</span><span class=w></span>
<a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a><span class=nt>services</span><span class=p>:</span><span class=w></span>
<a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a><span class=w>  </span><span class=nt>web</span><span class=p>:</span><span class=w></span>
<a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w></span>
<a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=s>&quot;./stored-binaries:/var/www/html/stored-binaries&quot;</span><span class=w> </span>
</code></pre></div> <h3 id=troubleshooting-mutagen-sync-issues>Troubleshooting Mutagen Sync Issues<a class=headerlink href=#troubleshooting-mutagen-sync-issues title="Permanent link">&para;</a></h3> <ul> <li>Please make sure that DDEV projects work <em>without</em> mutagen before troubleshooting mutagen. <code>ddev config --mutagen-enabled=false &amp;&amp; ddev restart</code>.</li> <li>DDEV's mutagen may not be compatible with an existing mutagen on your system. Please make sure that any mutagen installs you have are not running, or stop them. You may want to <code>brew uninstall mutagen-io/mutagen/mutagen mutagen-io/mutagen/mutagen-beta</code> to get rid of brew-installed versions.</li> <li>DDEV's mutagen is installed in <code>~/.ddev/bin/mutagen</code>. You can use all the features of mutagen by running that, including <code>~/.ddev/bin/mutagen sync list</code> and <code>~/.ddev/bin/mutagen daemon stop</code>. You can run the script <a href=https://raw.githubusercontent.com/drud/ddev/master/scripts/diagnose_mutagen.sh>diagnose_mutagen.sh</a> to gather some information about the setup of mutagen. Please report its output when creating an issue or otherwise seeking support.</li> <li>Try <code>~/.ddev/bin/mutagen daemon stop &amp;&amp; ~/.ddev/bin/mutagen daemon start</code> to restart the mutagen daemon if you suspect it's hanging.</li> <li>Use <code>ddev mutagen reset</code> if you suspect trouble (and always after changing the <code>.ddev/mutagen/mutagen.yml</code>. This restarts everything from scratch, including the docker volume that's used to store your project inside the container.)</li> <li><code>ddev mutagen monitor</code> can help watch mutagen behavior. It's the same as <code>~/.ddev/bin/mutagen sync monitor &lt;syncname&gt;</code></li> <li><code>ddev debug mutagen</code> will let you run any mutagen command using the binary in <code>~/.ddev/bin/mutagen</code>.</li> <li>If you're working on the host and expecting things to show up immediately inside the container, you can learn a lot by running <code>ddev mutagen monitor</code> in a separate window as you work. You'll see when mutagen responds to your changes and get an idea about how much delay there is.</li> <li>Consider <code>ddev stop</code> before massive file change operations (like moving a directory, etc.)</li> <li>If you get in real trouble, <code>ddev stop</code>, reset your files with git, and then <code>ddev mutagen reset</code> to throw away the docker volume (which may already have incorrect files on it.)</li> <li>If you're having trouble, we really want to hear from you to learn and try to sort it out. See the <a href=../../support/ >Support channels</a>.</li> </ul> <h4 id=advanced-mutagen-troubleshooting>Advanced Mutagen Troubleshooting<a class=headerlink href=#advanced-mutagen-troubleshooting title="Permanent link">&para;</a></h4> <p>Most people get all the information they need about mutagen by running <code>ddev mutagen monitor</code> to see the results. However, Mutagen has full logging. Here's how to run it:</p> <ul> <li><code>killall mutagen</code></li> <li><code>export MUTAGEN_LOG_LEVEL=debug</code> or <code>export MUTAGEN_LOG_LEVEL=trace</code></li> <li><code>~/.ddev/bin/mutagen daemon run</code></li> <li>Work with your project various actions and watch the output.</li> </ul> <p>When you're done, you can <code>ddev poweroff</code> and <code>&lt;ctrl-c&gt;</code> the running mutagen daemon to get back to normal.</p> <h3 id=mutagen-strategies-and-design-considerations>Mutagen Strategies and Design Considerations<a class=headerlink href=#mutagen-strategies-and-design-considerations title="Permanent link">&para;</a></h3> <p>Mutagen provides enormous speed boosts in everyday usage, but of course it's trying desperately under the hood to keep everything that changes in the container updated in the host, and vice versa.</p> <p>DDEV mounts a fast Docker volume onto <code>/var/www/html</code> inside the web container and then delegates to the mutagen daemon (on the host) the job of keeping all the contents of the project on the host in sync with the contents of the docker volume.</p> <p>The strategy in the DDEV integration is to try to make sure that at key points everything is completely in sync (consistent). Consistency is a really high priority for this integration.</p> <p>The life cycle of the mutagen daemon and sync sessions are something like this:</p> <ol> <li>On <code>ddev start</code> the mutagen agent will be started if it's not already running.</li> <li>If there is already a sync session for this project it's stopped and recreated.</li> <li>On <code>ddev stop</code> and <code>ddev pause</code> the sync session is flushed (made completely consistent) and then terminated.</li> </ol> <p>In addition, a synchronous flush is performed after any <code>ddev composer</code> command, because composer may cause massive changes to the filesystem inside the container, and those need to be synced before operation continues.</p> <p>If you need to reset everything for a project, you can do it with <code>ddev mutagen reset</code> which starts the mutagen session from scratch and removes the docker volume so it can be recreated from scratch.</p> <h3 id=interaction-with-other-usages-of-mutagen>Interaction with other usages of Mutagen<a class=headerlink href=#interaction-with-other-usages-of-mutagen title="Permanent link">&para;</a></h3> <p>DDEV requires and provides a specific version of Mutagen, which you can see with <code>ddev version</code>.</p> <p>Mutagen does not guarantee interoperability between different mutagen versions, so you may have trouble if you have another version of mutagen installed. You can find out what version of mutagen you may have installed outside of DDEV with <code>mutagen version</code>.</p> <p>You'll want your system version of mutagen to be the same as the one provided with DDEV. If you're using mutagen for anything else, see the <a href=https://mutagen.io/documentation/introduction/installation>Mutagen installation instructions</a> and install the required version.</p> </div> <div class=tabbed-block> <h2 id=using-nfs-to-mount-the-project-into-the-web-container>Using NFS to Mount the Project into the Web Container<a class=headerlink href=#using-nfs-to-mount-the-project-into-the-web-container title="Permanent link">&para;</a></h2> <p>NFS (Network File System) is a classic, mature Unix technique to mount a filesystem from one device to another. It provides significantly improved webserver performance on macOS and Windows. DDEV-Local supports this technique, but it <strong>does require a small amount of pre-configuration on your host computer.</strong> DDEV-Local doesn't make changes to your computer's configuration without your involvement and approval, so this is done with a setup script that you run and that asks you for your <code>sudo</code> password.</p> <p>The steps to set up NFS mounting on any operating system are:</p> <ol> <li>Make sure DDEV-Local is already working and you can use it.</li> <li>Configure the NFS server and exports files using the provided scripts for each operating system.</li> <li>Test that NFS is working correctly by using <code>ddev debug nfsmount</code> in a project directory. The first line should report something like "Successfully accessed NFS mount of /path/to/project"</li> <li>Enable NFS mounting globally with <code>ddev config global --nfs-mount-enabled</code> (You can also configure NFS mounting on a per-project basis with <code>ddev config --nfs-mount-enabled</code> in the project directory, but this is unusual. If nfs mounting is turned on globally it overrides any local project settings for NFS.)</li> <li><code>ddev start</code> your project and make sure it works OK. Use <code>ddev describe</code> to verify that NFS mounting is being used. The NFS status is near the top of the output of <code>ddev describe</code>.</li> </ol> <p>Note that you can use the NFS setup described for each operating system below (and the scripts provided) or you can set up NFS any way that works for you. For example, if you're already using NFS with vagrant on macOS, and you already have a number of exports, the default export here (your home directory) won't work, because you'll have overlaps in your <code>/etc/exports</code>. Or on Windows, you may want to use an NFS server other than <a href=https://github.com/winnfsd/winnfsd>Winnfsd</a>, for example the <a href=https://nfsforwindows.com>Allegro NFS Server</a>. The setups provided below and the scripts provided below are only intended to get you started if you don't already use NFS.</p> <p>Note that NFS does not really add to performance on Linux, so it is not recommended.</p> <div class="tabbed-set tabbed-alternate" data-tabs=2:2><input checked=checked id=__tabbed_2_1 name=__tabbed_2 type=radio><input id=__tabbed_2_2 name=__tabbed_2 type=radio><div class=tabbed-labels><label for=__tabbed_2_1>macOS NFS Setup</label><label for=__tabbed_2_2>Windows NFS Setup</label></div> <div class=tabbed-content> <div class=tabbed-block> <p>Download, inspect, make executable, and run the <a href=https://raw.githubusercontent.com/drud/ddev/master/scripts/macos_ddev_nfs_setup.sh>macos_ddev_nfs_setup.sh</a> script. Use <code>curl -O https://raw.githubusercontent.com/drud/ddev/master/scripts/macos_ddev_nfs_setup.sh &amp;&amp; chmod +x macos_ddev_nfs_setup.sh &amp;&amp; ./macos_ddev_nfs_setup.sh</code>. This stops running ddev projects, adds your home directory to the <code>/etc/exports</code> config file that nfsd uses, and enables nfsd to run on your computer. This is a one-time setup. Note that this shares your home directory via NFS to any NFS client on your computer, so it's critical to consider security issues; It's easy to make the shares in <code>/etc/exports</code> more limited as well, as long as they don't overlap (NFS doesn't allow overlapping exports).</p> <p>If your DDEV-Local projects are set up outside your home directory, you'll need to edit <code>/etc/exports</code> to add a line for that share as well. <code>sudo vi /etc/exports</code> and copy the line the script has just created (<code>/System/Volumes/Data/Users/username -alldirs -mapall=&lt;your_user_id&gt;:20 localhost</code>), editing it with the additional path, e.g: <code>/Volumes/SomeExternalDrive -alldirs -mapall=&lt;your_uid&gt;:20 localhost</code>.</p> <div class="admonition warning"> <p class=admonition-title>macOS and the Documents directory</p> <p>If your projects are in a subdirectory of the <code>~/Documents</code> directory or on an external drive, it may necessary to grant the "Full Disk Access" permission to the <code>/sbin/nfsd</code> binary. Full details are <a href=#macos-full-disk-access-for-special-directories>below</a>.</p> </div> <h4 id=macos-full-disk-access-for-special-directories>macOS Full Disk Access for Special Directories<a class=headerlink href=#macos-full-disk-access-for-special-directories title="Permanent link">&para;</a></h4> <ul> <li>If you are on macOS, and your projects are in a subdirectory of the <code>~/Documents</code> or <code>~/Desktop</code> directories or on an external drive, you must grant "Full Disk Access" privilege to /sbin/nfsd in the Privacy settings in the System Preferences. On the "Full disk access" section, click the "+" and add <code>/sbin/nfsd</code> as shown here: <img alt=screenshot src=../../images/sbin_nfsd_selection.png> You should then see nfsd in the list as shown: <img alt=screenshot src=../../images/nfsd_full_disk_access.png>.</li> <li><code>sudo nfsd restart</code></li> <li>Use <code>ddev debug nfsmount</code> in a project directory to make sure it gives successful output like</li> </ul> <h4 id=macos-specific-nfs-debugging>macOS-specific NFS debugging<a class=headerlink href=#macos-specific-nfs-debugging title="Permanent link">&para;</a></h4> <ul> <li>Please temporarily disable any firewall or VPN.</li> <li>Use <code>showmount -e</code> to find out what is exported via NFS. If you don't see a parent of your project directory in there, then NFS can't work.</li> <li>If nothing is showing, use <code>nfsd checkexports</code> and read carefully for errors</li> <li>Use <code>ps -ef | grep nfsd</code> to make sure nfsd is running</li> <li>Restart nfsd with <code>sudo nfsd restart</code></li> <li>Add the following to your /etc/nfs.conf:</li> </ul> <div class=highlight><pre><span></span><code><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a>nfs.server.mount.require_resv_port = 0
<a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a>nfs.server.verbose = 3
</code></pre></div> <ul> <li>Run Console.app and put "nfsd" in the search box at the top. <code>sudo nfsd restart</code> and read the messages carefully. Attempt to <code>ddev debug nfsmount</code> the problematic project directory.</li> </ul> <div class=highlight><pre><span></span><code><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a>$ ddev debug nfsmount
<a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a>Successfully accessed NFS mount of /Users/rfay/workspace/d8composer
<a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a>TARGET    SOURCE                                                FSTYPE OPTIONS
<a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a>/nfsmount :/System/Volumes/Data/Users/rfay/workspace/d8composer nfs    rw,relatime,vers<span class=o>=</span><span class=m>3</span>,rsize<span class=o>=</span><span class=m>65536</span>,wsize<span class=o>=</span><span class=m>65536</span>,namlen<span class=o>=</span><span class=m>255</span>,hard,nolock,proto<span class=o>=</span>tcp,timeo<span class=o>=</span><span class=m>600</span>,retrans<span class=o>=</span><span class=m>2</span>,sec<span class=o>=</span>sys,mountaddr<span class=o>=</span><span class=m>192</span>.168.65.2,mountvers<span class=o>=</span><span class=m>3</span>,mountproto<span class=o>=</span>tcp,local_lock<span class=o>=</span>all,addr<span class=o>=</span><span class=m>192</span>.168.65.2
<a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a>/nfsmount/.ddev
</code></pre></div> </div> <div class=tabbed-block> <p>The executable components required for Windows NFS (winnfsd and nssm) are packaged with the DDEV Windows Installer in each release, so if you've used the windows installer, they're available already. To enable winnfsd as a service, please download, inspect and run the script "windows_ddev_nfs_setup.sh" installed by the installer in <code>C:\Program Files\ddev\windows_ddev_nfs_setup.sh</code> (or download from <a href=https://raw.githubusercontent.com/drud/ddev/master/scripts/windows_ddev_nfs_setup.sh>windows_ddev_nfs_setup.sh</a>) in a git-bash session on windows. If your DDEV-Local projects are set up outside your home directory, you'll need to edit the ~/.ddev/nfs_exports.txt created by the script and then restart the service with <code>sudo nssm restart nfsd</code>.</p> <div class="admonition warning"> <p class=admonition-title>Firewall Issues</p> <p>On Windows 10/11 you will likely run afoul of the Windows Defender Firewall, and it will be necessary to allow <code>winnfsd</code> to bypass it. If you're getting a timeout with no information after <code>ddev start</code>, try going to "Windows Defender Firewall" -&gt; "Allow an app or feature through Windows Defender Firewall", "Change Settings", "Allow another app". Then choose C:\Program Files\ddev\winnfsd.exe, assuming that's where winnfsd is installed.</p> </div> <h4 id=debugging-ddev-start-failures-with-nfs_mount_enabled-true>Debugging <code>ddev start</code> failures with <code>nfs_mount_enabled: true</code><a class=headerlink href=#debugging-ddev-start-failures-with-nfs_mount_enabled-true title="Permanent link">&para;</a></h4> <p>There are a number of reasons that the NFS mount can fail on <code>ddev start</code>:</p> <ul> <li>Firewall issues</li> <li>NFS Server not running</li> <li>Trying to start more than one NFS server.</li> <li>NFS exports overlap. This is typically an issue if you've had another NFS client setup (like vagrant). You'll need to reconfigure your exports paths so they don't overlap.</li> <li>Path of project not shared in <code>/etc/exports</code> (or <code>~/.ddev/nfs_exports.txt</code> on Windows)</li> <li>Project is in the ~/Documents directory or an external drive on macOS Catalina or higher (see macOS information below)</li> </ul> <p>Tools to debug and solve permission problems:</p> <ul> <li>Try <code>ddev debug nfsmount</code> in a project directory to see if basic NFS mounting is working. If that works, it's likely that everything else will.</li> <li>When debugging, please do <code>ddev restart</code> in between each change. Otherwise, you can have stale mounts inside the container and you'll miss any benefit you may find in the debugging process.</li> <li>Inspect the <code>/etc/exports</code> (or <code>~/.ddev/nfs_exports.txt</code> on Windows).</li> <li>Restart the server (<code>sudo nfsd restart</code> on macOS, <code>sudo nssm restart nfsd</code> on Windows).</li> <li><code>showmount -e</code> on macOS will show the shared mounts.</li> </ul> <h4 id=windows-specific-nfs-debugging>Windows-specific NFS debugging<a class=headerlink href=#windows-specific-nfs-debugging title="Permanent link">&para;</a></h4> <ul> <li>Please temporarily disable any firewall or VPN.</li> <li> <p>You can only have one NFS daemon running, so if another application has installed one, you'll want to use that NFS daemon and reconfigure it to allow NFS mounts of your projects.</p> </li> <li> <p>Stop the running winnfsd service: <code>sudo nssm stop nfsd</code></p> </li> <li>Run winnfsd manually in the foreground: <code>winnfsd "C:\\"</code>. If it returns to the shell prompt immediately there's likely another nfsd service running.</li> <li>In another window, in a ddev project directory, <code>ddev debug nfsmount</code> to see if it can mount successfully. (The project need not be started.). <code>ddev debug nfsmount</code> is successful, then everything is probably going to work.</li> <li>After verifying that ~/.ddev/nfs_exports.txt has a line that includes your project directories, <code>sudo nssm start nfsd</code> and <code>nssm status nfsd</code>. The status command should show SERVICE_RUNNING.</li> <li>These <a href=https://nssm.cc/ >nssm</a> commands may be useful: <code>nssm help</code>, <code>sudo nssm start nfsd</code>, <code>sudo nssm stop nfsd</code>, <code>nssm status nfsd</code>, <code>sudo nssm edit nfsd</code> (pops up a window that may be hidden), and <code>sudo nssm remove nfsd</code> (also pops up a window, doesn't work predictably if you haven't already stopped the service).</li> <li>nssm logs failures and what it's doing to the system event log. Run "Event Viewer" and filter events as in the image below: <img alt="Windows Event Viewer" src=../../images/windows_event_viewer.png>.</li> <li>Please make sure you have excluded winnfsd from the Windows Defender Firewall, as described in the installation instructions above.</li> <li>On Windows 10/11 Pro you can "Turn Windows features on or off" and enable "Services for NFS"-&gt; "Client for NFS". The <code>showmount -e</code> command will then show available exports on the current machine. This can help find out if a conflicting server is running or exactly what the problem with exports may be.</li> </ul> </div> </div> </div> </div> </div> </div> <h2 id=freeing-up-system-resources>Freeing Up System Resources<a class=headerlink href=#freeing-up-system-resources title="Permanent link">&para;</a></h2> <p>Every project you run uses system resources, and may compete for those resources. A reasonable practice is to stop projects that aren't currently in use, or stop all projects with <code>ddev poweroff</code> and then start the one that you're actually working on. <code>ddev list</code> will show you the projects you're working on.</p> <h2 id=docker-desktop-for-mac-settings>Docker Desktop for Mac Settings<a class=headerlink href=#docker-desktop-for-mac-settings title="Permanent link">&para;</a></h2> <p>Docker Desktop for Mac has a number of settings that you'll want to pay attention to. Under "Advanced" in the "Resources" section in "Preferences", you can adjust the amount of memory, disk, and CPUs allocated to Docker. While the defaults work well for a small project or two, you may want to adjust these upward based on your experience. The default memory allocation is 2GB, but many people raise it to 4-5GB or even higher. The disk allocation almost always needs to be raised to accommodate increased downloaded images. Your experience will determine what to do with CPUs.</p> <hr> <div class=md-source-file> <small> Last update: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">July 9, 2022</span> </small> </div> </article> </div> </div> <a href=# class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </a> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../ddev-installation/ class="md-footer__link md-footer__link--prev" aria-label="Previous: DDEV Installation" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> DDEV Installation </div> </div> </a> <a href=../shell-completion/ class="md-footer__link md-footer__link--next" aria-label="Next: Shell Completion & Autocomplete" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Shell Completion & Autocomplete </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Localdev Foundation </div> </div> <div class=md-social> <a href=https://github.com/drud/ddev target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href=https://discord.gg/hCZFfAMc5k target=_blank rel=noopener title=discord.gg class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M524.531 69.836a1.5 1.5 0 0 0-.764-.7A485.065 485.065 0 0 0 404.081 32.03a1.816 1.816 0 0 0-1.923.91 337.461 337.461 0 0 0-14.9 30.6 447.848 447.848 0 0 0-134.426 0 309.541 309.541 0 0 0-15.135-30.6 1.89 1.89 0 0 0-1.924-.91 483.689 483.689 0 0 0-119.688 37.107 1.712 1.712 0 0 0-.788.676C39.068 183.651 18.186 294.69 28.43 404.354a2.016 2.016 0 0 0 .765 1.375 487.666 487.666 0 0 0 146.825 74.189 1.9 1.9 0 0 0 2.063-.676A348.2 348.2 0 0 0 208.12 430.4a1.86 1.86 0 0 0-1.019-2.588 321.173 321.173 0 0 1-45.868-21.853 1.885 1.885 0 0 1-.185-3.126 251.047 251.047 0 0 0 9.109-7.137 1.819 1.819 0 0 1 1.9-.256c96.229 43.917 200.41 43.917 295.5 0a1.812 1.812 0 0 1 1.924.233 234.533 234.533 0 0 0 9.132 7.16 1.884 1.884 0 0 1-.162 3.126 301.407 301.407 0 0 1-45.89 21.83 1.875 1.875 0 0 0-1 2.611 391.055 391.055 0 0 0 30.014 48.815 1.864 1.864 0 0 0 2.063.7A486.048 486.048 0 0 0 610.7 405.729a1.882 1.882 0 0 0 .765-1.352c12.264-126.783-20.532-236.912-86.934-334.541ZM222.491 337.58c-28.972 0-52.844-26.587-52.844-59.239s23.409-59.241 52.844-59.241c29.665 0 53.306 26.82 52.843 59.239 0 32.654-23.41 59.241-52.843 59.241Zm195.38 0c-28.971 0-52.843-26.587-52.843-59.239s23.409-59.241 52.843-59.241c29.667 0 53.307 26.82 52.844 59.239 0 32.654-23.177 59.241-52.844 59.241Z"/></svg> </a> <a href=https://stackoverflow.com/tags/ddev target=_blank rel=noopener title=stackoverflow.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 384 512"><!-- Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M290.7 311 95 269.7 86.8 309l195.7 41zm51-87L188.2 95.7l-25.5 30.8 153.5 128.3zm-31.2 39.7L129.2 179l-16.7 36.5L293.7 300zM262 32l-32 24 119.3 160.3 32-24zm20.5 328h-200v39.7h200zm39.7 80H42.7V320h-40v160h359.5V320h-40z"/></svg> </a> <a href="https://twitter.com/search?q=%23ddev&src=unknown&f=live" target=_blank rel=noopener title=twitter.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["navigation.expand", "navigation.indexes", "navigation.instant", "navigation.sections", "navigation.tabs", "navigation.top", "toc.integrate"], "search": "../../../assets/javascripts/workers/search.b97dbffb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script> <script src=../../../assets/javascripts/bundle.6c7ad80a.min.js></script> <script src=../../../assets/jquery-3.5.1.min.js></script> </body> </html>